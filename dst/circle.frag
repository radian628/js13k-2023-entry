#version 300 es
precision highp float;in vec2 d;uniform sampler2D fields;uniform sampler2D colors;layout(location=0)out vec4 out_fields;layout(location=1)out vec4 out_colors;uniform vec2 circle;uniform vec4 radii;uniform vec4 colors_change;uniform float force_factor;/*PERLIN*/void main() {vec4 circle_factors=max(radii-vec4(distance(circle.xy,d)),vec4(0.)) *radii;bvec4 in_circle=greaterThan(circle_factors,vec4(0.));vec2 explosion=normalize(d-circle.xy)*1.*force_factor* (perlin(d*50.) *0.7+0.3);out_fields=texture(fields,d)+vec4(any(in_circle)?vec2(explosion):vec2(0.),0.,0.);out_colors=texture(colors,d)+vec4(in_circle) *colors_change* (0.5+perlin(d*175.) *0.5);}