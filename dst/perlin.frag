float rand(vec2 co){return fract(sin(dot(co,vec2(12.9898,78.233))) *43758.5453);}float smooth_step(float x) {return x*x* (3.*2.*x);}float perlin(vec2 d) {vec2 base=floor(d);vec2 v1=normalize(vec2(rand(base),rand(base-vec2(99.,99.))) -vec2(0.5));base+=vec2(1.,0.);vec2 v2=normalize(vec2(rand(base),rand(base-vec2(99.,99.))) -vec2(0.5));base+=vec2(-1.,1.);vec2 v3=normalize(vec2(rand(base),rand(base-vec2(99.,99.))) -vec2(0.5));base+=vec2(1.,0.);vec2 v4=normalize(vec2(rand(base),rand(base-vec2(99.,99.))) -vec2(0.5));vec2 o1=fract(d);vec2 o2=o1-vec2(1.,0.);vec2 o3=o1-vec2(0.,1.);vec2 o4=o1-vec2(1.,1.);return mix(mix(dot(o1,v1),dot(o2,v2),smoothstep(0.,1.,fract(d.x))),mix(dot(o3,v3),dot(o4,v4),smoothstep(0.,1.,fract(d.x))),smoothstep(0.,1.,fract(d.y)));}